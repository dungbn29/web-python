<!DOCTYPE html>
<html>
<head>
  <title>Giỏ hàng</title>
  <link rel="stylesheet" href="/static/css/index.css">
  <link rel="stylesheet" href="/static/css/cart.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
  <header class="main-header">
    <a href="/" class="logo">Phone Shop</a>
    <nav>
      <a href="/cart">Giỏ hàng</a>
      {% if session.get('user') %}
        <span>Xin chào {{ session.get('user_name', 'User') }}</span>
        <a href="/logout">Đăng xuất</a>
      {% else %}
        <a href="/login">Đăng nhập</a>
        <a href="/register">Đăng ký</a>
      {% endif %}
    </nav>
  </header>
  <main class="cart">
    <h1>Giỏ hàng của bạn</h1>
    {% if cart %}
      <div class="cart-list">
        {% for item in cart %}
        <div class="cart-item">
          <img class="product-image-large" src="/static/images/{{ item.image }}" alt="{{ item.name }}">
          <div class="cart-info">
            <div class="cart-title">{{ item.name }}</div>
            <div class="cart-quantity">
              <div class="quantity-control">
                <button class="quantity-btn minus" data-name="{{ item.name }}">-</button>
                <span class="quantity">{{ item.quantity }}</span>
                <button class="quantity-btn plus" data-name="{{ item.name }}">+</button>
              </div>
              <div class="cart-price">{{ item.price * item.quantity }} VND</div>
              <a class="remove-btn" href="/remove_from_cart/{{ item.name }}">
                <i class="fas fa-trash"></i> Xoá
              </a>
            </div>    
          </div>
        </div>
        {% endfor %}
      </div>
      <p class="cart-total"><strong>Tổng tiền: {{ total }} VND</strong></p>
      <a href="/checkout" class="continue-btn">Thanh toán</a>       
    {% else %}
      <p>Giỏ hàng trống</p>
    {% endif %}
      <a class="continue-btn" href="/">Tiếp tục mua hàng</a>
  </main>
  <script src="/static/cart.js"></script>
</body>
</html>